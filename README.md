# Создание красивого и понятного кода на JavaScript

Ошибки в программе достаточно сложно найти. И чтобы упростить себе задачу, нужно писать код правильно и красиво (читаемо). Хороший код должен быть: удобочитаемым, непротиворечивым, предсказуемым, правильно оформленным, а так же он должен иметь документацию.

## Важные моменты по оформлению кода
---

### 1. Не используйте `var`.

Объявляйте все локальные переменные с помощью `const` или `let`. Используйте `const` по-дефолту, пока переменную не надо будет переназначить. Слово `var` не должно использоваться.

### 2. Всегда объявляйте переменные в начале функции.
Если вы объявите все используемые функции в начале определения функции, то код будет значительно более читабелен. Также рекомендуется пояснять значение переменных комментариями к коду.

```js
Неправильно

 function myFunc() {
  let name = "",
  lastName = "",
  age;
  /* code here */
  let x = 100500;
  /*code here*/
  for(var i = 0; i < 100; i++){
    /*code here*/
  }
 }

Правильно

 function myFunc() {
  let name = "",
  lastName = "",
  age,
  x = 100500,
  let i = 0; 
  /* code here */
 }
```

### 3. Всегда ставьте точку с запятой.
В JavaScript ставить точку с запятой в конце каждой строки является необязательным, однако, что произойдет если мы минифицируем код? — Правильно, код поломается.

```js
Неправильно

 function myFunction(a,b) {
   let sum = a + b
   alert(sum)
 }

Правильно

 function myFunction(a,b) {
   let sum = a + b;
   alert(sum);
 }
```

### 4. Всегда используйте фигурные скобки.

JavaScript позволяет не писать фигурные скобки, однако то, что это позволено не означает, что это правильно. Во-первых ваш код выглядит не так очевидно, а во вторых он не будет работать после его минификации.

```js
Не правильно

 if (true)
   alert(true);

Правильно

 if (true){ alert(true); }
```

### 5. Используйте `===` для сравнения вместо `==`.
Оператор `==` в действительности не сравнивает объекты, а пытается привести их типы. Для сравнения объектов в JavaScript используйте оператор `===`.

```js
Неправильно

 0 == false //true
 [] == false //true

Правильно

 0 === false //false
 [] === false //false
 ```

### 6. Не используйте сокращений.
Сокращения — это сладкий яд, который убивает ваш код.

```js
Неправильно

 ++i;
 i ++;
 let a, b = 100, 50;
 
Правильно

 i += 1;
 i = i + 1;
 
 let a = 100,
 b = 50;
 ```
Сокращения делают ваш код менее очевидным, а некоторые, как, например множественное присваивание вообще приводят к ошибкам. В примере с переменными a и b, a будет локальной, а b — глобальной.

### 7. Используйте всегда многострочные комментарии.
Использовать однострочные комментарии кажется более удобной практикой, чем использование много строчных, ведь мы экономим аж 2 символа, однако что случиться при минификации кода? — Правильно, весь код, записанный в одну строку после первого же комментария превратится и работающего кода в закомментированный.

```js
Неправильно

 let myVar; //myVar хранит myValue
 
Правильно

 let myVar; /*myVar хранит myValue*/
```

### 8. Не используйте `with`
`with` — это совсем бесполезное ключевое слово, которое делает ваш код менее очевидным для любого, кто будет его читать, даже для вас. Кроме того, with может значительно ухудшить производительность.

```js
Неправильно

 with (document) {
  write("Welcome to http://RubyDev.ru!");
  /*etc.*/
}

Правильно

 document.write("Welcome to http://RubyDev.ru");
 
Как вариант

 let d = document;
 d.write("Welcome to http://RubyDev.ru");
```

### 9. Используйте кэширование результатов.
Зачем выполнять код несколько раз, когда результат не меняется? В таких случаях необходимо использовать кэширование результата.

```js
Неправильно

 for (i=0; i <= myArray.length; i += 1){
   /*some code*/
 }
 
Правильно

 let length = myArray.length
 
 for (i=0; i <= length; i += 1){
  /*some code*/
}
```

```js
Неправильно

 $("#my-id").click(function(){/*some code*/});
 $("#my-id").dblClick(function(){/*some code*/});

Правильно

 let myId = $("#my-id);
 myId.click(function(){/*some code*/});
 myId.dblclick(function(){/*some code*/});
 ```
Кэширование результата в зависимости от количества вызовов функции может значительно повысить производительность вашего кода, особенно это касается случаев, когда имеется большое количество вызовов и/или достаточно медленный код, например работа с DOM.

### 10. Используйте массивы специальных типов `Int16Array`, `Int32Array`, `Float32Array` и `Float64Array`.
Когда это возможно — используйте массивы специальных типов. Они работают примерно в 2 раза быстрее обычных. Разумеется, в таких массивах можно хранить только численные значения, однако даже так можно более-менее значительно улучшить производительность вашего кода, особенно если вы работаете с графикой.